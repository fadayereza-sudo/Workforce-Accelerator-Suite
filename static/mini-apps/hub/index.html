<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Workforce Hub</title>

    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DESIGN SYSTEM - Premium aesthetics for Telegram Mini App
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

        :root {
            /* Telegram Theme Variables (overridden by SDK) */
            --tg-theme-bg-color: #0f172a;
            --tg-theme-secondary-bg-color: #1e293b;
            --tg-theme-text-color: #f8fafc;
            --tg-theme-hint-color: #94a3b8;
            --tg-theme-link-color: #06b6d4;
            --tg-theme-button-color: #06b6d4;
            --tg-theme-button-text-color: #ffffff;

            /* Extended Palette - Slate colors */
            --color-slate-900: #0f172a;
            --color-slate-800: #1e293b;
            --color-slate-700: #334155;
            --color-slate-600: #475569;
            --color-slate-500: #64748b;
            --color-slate-400: #94a3b8;
            --color-slate-300: #cbd5e1;
            --color-slate-200: #e2e8f0;
            --color-slate-100: #f1f5f9;
            --color-slate-50: #f8fafc;

            /* Accent - Cyan */
            --color-cyan-500: #06b6d4;
            --color-cyan-400: #22d3ee;
            --color-cyan-600: #0891b2;
            --color-cyan-700: #0e7490;

            /* Semantic Colors */
            --color-success: #10b981;
            --color-success-light: #d1fae5;
            --color-warning: #f59e0b;
            --color-warning-light: #fef3c7;
            --color-error: #ef4444;
            --color-error-light: #fee2e2;

            /* Gradients */
            --gradient-primary: linear-gradient(135deg, var(--color-slate-800) 0%, var(--color-slate-900) 100%);
            --gradient-accent: linear-gradient(135deg, var(--color-cyan-500) 0%, var(--color-cyan-600) 100%);
            --gradient-success: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            --gradient-warm: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);

            /* Shadows */
            --shadow-sm: 0 1px 2px rgba(15, 23, 42, 0.06);
            --shadow-md: 0 4px 12px rgba(15, 23, 42, 0.08);
            --shadow-lg: 0 8px 24px rgba(15, 23, 42, 0.12);
            --shadow-glow: 0 0 20px rgba(6, 182, 212, 0.15);

            /* Typography */
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', sans-serif;

            /* Spacing */
            --space-xs: 4px;
            --space-sm: 8px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
            --space-2xl: 48px;

            /* Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-full: 9999px;

            /* Transitions */
            --transition-fast: 150ms ease;
            --transition-normal: 250ms ease;
            --transition-smooth: 350ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           BASE STYLES
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: var(--font-sans);
            font-size: 16px;
            line-height: 1.5;
            color: var(--tg-theme-text-color);
            background: var(--tg-theme-bg-color);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           LAYOUT
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        #app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .page {
            display: none;
            flex: 1;
            padding: var(--space-lg);
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: flex;
            flex-direction: column;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-header {
            margin-bottom: var(--space-lg);
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.5px;
            margin-bottom: var(--space-xs);
        }

        .page-subtitle {
            color: var(--tg-theme-hint-color);
            font-size: 15px;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: CARDS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .card {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
        }

        .card-elevated {
            background: var(--tg-theme-bg-color);
            box-shadow: var(--shadow-md);
        }

        .card-gradient {
            background: var(--gradient-accent);
            color: white;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-md);
        }

        .card-title {
            font-size: 17px;
            font-weight: 600;
        }

        .card-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 10px;
            border-radius: var(--radius-full);
            font-size: 13px;
            font-weight: 500;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: BUTTONS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-sm);
            padding: 14px 24px;
            border: none;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-fast);
            -webkit-tap-highlight-color: transparent;
        }

        .btn:active {
            transform: scale(0.98);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn-primary {
            background: var(--color-cyan-500);
            color: white;
            box-shadow: var(--shadow-md);
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--color-cyan-600);
            box-shadow: var(--shadow-glow);
        }

        .btn-secondary {
            background: var(--tg-theme-secondary-bg-color);
            color: var(--tg-theme-text-color);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--tg-theme-button-color);
            color: var(--tg-theme-button-color);
        }

        .btn-success {
            background: var(--gradient-success);
            color: white;
        }

        .btn-block {
            width: 100%;
        }

        .btn-sm {
            padding: 10px 16px;
            font-size: 14px;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: INPUTS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .input-group {
            margin-bottom: var(--space-lg);
        }

        .input-label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: var(--tg-theme-hint-color);
            margin-bottom: var(--space-sm);
        }

        .input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            background: var(--tg-theme-secondary-bg-color);
            font-family: inherit;
            font-size: 16px;
            color: var(--tg-theme-text-color);
            transition: all var(--transition-fast);
        }

        .input:focus {
            outline: none;
            border-color: var(--tg-theme-button-color);
            background: var(--tg-theme-bg-color);
        }

        .input::placeholder {
            color: var(--tg-theme-hint-color);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: LISTS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
        }

        .list-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
            transition: background var(--transition-fast);
        }

        .list-item-clickable {
            cursor: pointer;
        }

        .list-item-clickable:active {
            background: var(--tg-theme-bg-color);
        }

        .list-item-avatar {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-full);
            background: var(--color-cyan-500);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
            flex-shrink: 0;
        }

        .list-item-content {
            flex: 1;
            min-width: 0;
        }

        .list-item-title {
            font-weight: 600;
            margin-bottom: 2px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .list-item-subtitle {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }

        .list-item-action {
            flex-shrink: 0;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: CHIPS / TAGS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .chip {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-full);
            font-size: 13px;
            font-weight: 500;
        }

        .chip-success {
            background: var(--color-success-light);
            color: var(--color-success);
        }

        .chip-warning {
            background: var(--color-warning-light);
            color: var(--color-warning);
        }

        .chip-selectable {
            cursor: pointer;
            transition: all var(--transition-fast);
            border: 2px solid transparent;
        }

        .chip-selectable.selected {
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border-color: var(--tg-theme-button-color);
        }

        .chips-group {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: INVITE LINK BOX
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .invite-box {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .invite-link {
            flex: 1;
            font-family: monospace;
            font-size: 13px;
            color: var(--tg-theme-hint-color);
            word-break: break-all;
        }

        .invite-copy-btn {
            background: var(--tg-theme-button-color);
            color: var(--tg-theme-button-text-color);
            border: none;
            padding: 10px 16px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            flex-shrink: 0;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: EMPTY STATE
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .empty-state {
            text-align: center;
            padding: var(--space-2xl) var(--space-lg);
            color: var(--tg-theme-hint-color);
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: var(--space-md);
            opacity: 0.5;
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--tg-theme-text-color);
            margin-bottom: var(--space-sm);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: LOADING
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .skeleton {
            background: linear-gradient(
                90deg,
                var(--tg-theme-secondary-bg-color) 25%,
                var(--tg-theme-bg-color) 50%,
                var(--tg-theme-secondary-bg-color) 75%
            );
            background-size: 200% 100%;
            animation: skeleton-shimmer 1.5s infinite;
            border-radius: var(--radius-md);
        }

        @keyframes skeleton-shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid var(--tg-theme-secondary-bg-color);
            border-top-color: var(--tg-theme-button-color);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex: 1;
            gap: var(--space-md);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: STATUS INDICATOR
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .status-pending {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: var(--space-2xl);
        }

        .status-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            margin-bottom: var(--space-lg);
        }

        .status-icon-waiting {
            background: var(--color-warning-light);
        }

        .status-icon-success {
            background: var(--color-success-light);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: TAB BAR
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .tabs {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
            background: var(--tg-theme-secondary-bg-color);
            padding: 4px;
            border-radius: var(--radius-md);
        }

        .tab {
            flex: 1;
            padding: 10px;
            border: none;
            background: transparent;
            color: var(--tg-theme-hint-color);
            font-family: inherit;
            font-size: 14px;
            font-weight: 600;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .tab.active {
            background: var(--tg-theme-bg-color);
            color: var(--tg-theme-text-color);
            box-shadow: var(--shadow-sm);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: MODAL / SHEET
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: flex-end;
            z-index: 100;
            animation: fadeIn 0.2s ease;
        }

        .modal-backdrop.active {
            display: flex;
        }

        .modal-sheet {
            width: 100%;
            max-height: 90vh;
            background: var(--tg-theme-bg-color);
            border-radius: var(--radius-lg) var(--radius-lg) 0 0;
            padding: var(--space-lg);
            animation: slideUp 0.3s ease;
            overflow-y: auto;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .modal-handle {
            width: 36px;
            height: 4px;
            background: var(--tg-theme-hint-color);
            opacity: 0.3;
            border-radius: 2px;
            margin: 0 auto var(--space-lg);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: var(--space-lg);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           PAGE-SPECIFIC: ONBOARDING
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .onboarding-hero {
            text-align: center;
            padding: var(--space-2xl) 0;
        }

        .onboarding-icon {
            width: 100px;
            height: 100px;
            background: var(--color-cyan-500);
            border-radius: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-lg);
            font-size: 48px;
            box-shadow: var(--shadow-lg);
        }

        .onboarding-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: var(--space-sm);
        }

        .onboarding-subtitle {
            color: var(--tg-theme-hint-color);
            font-size: 16px;
            max-width: 280px;
            margin: 0 auto;
        }

        .onboarding-divider {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin: var(--space-lg) 0;
            color: var(--tg-theme-hint-color);
            font-size: 14px;
        }

        .onboarding-divider::before,
        .onboarding-divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--tg-theme-hint-color);
            opacity: 0.3;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           UTILITY CLASSES
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .text-center { text-align: center; }
        .text-muted { color: var(--tg-theme-hint-color); }
        .text-success { color: var(--color-success); }
        .text-error { color: var(--color-error); }
        .text-sm { font-size: 14px; }
        .font-semibold { font-weight: 600; }
        .mt-auto { margin-top: auto; }
        .mb-md { margin-bottom: var(--space-md); }
        .mb-lg { margin-bottom: var(--space-lg); }
        .hidden { display: none !important; }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: ORG HEADER
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .org-header {
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
            padding: var(--space-lg);
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-lg);
        }

        .org-avatar {
            width: 60px;
            height: 60px;
            border-radius: var(--radius-md);
            background: var(--color-cyan-500);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 24px;
            flex-shrink: 0;
        }

        .org-info {
            flex: 1;
            min-width: 0;
        }

        .org-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .org-description {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
            margin-bottom: var(--space-sm);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .org-stats {
            font-size: 13px;
            color: var(--tg-theme-hint-color);
        }

        .org-edit-btn {
            background: var(--tg-theme-bg-color);
            border: none;
            padding: 8px 14px;
            border-radius: var(--radius-sm);
            font-size: 14px;
            font-weight: 600;
            color: var(--tg-theme-button-color);
            cursor: pointer;
            flex-shrink: 0;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: MEMBER DETAIL MODAL
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .member-detail-header {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .member-detail-avatar {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-full);
            background: var(--color-cyan-500);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 22px;
        }

        .member-detail-info {
            flex: 1;
        }

        .member-detail-name {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 2px;
        }

        .member-detail-meta {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--tg-theme-hint-color);
            margin-bottom: var(--space-sm);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .bot-toggle-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-sm);
            margin-bottom: var(--space-lg);
        }

        .bot-toggle-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--space-md);
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
        }

        .bot-toggle-name {
            font-weight: 500;
        }

        /* Toggle switch */
        .toggle {
            position: relative;
            width: 48px;
            height: 28px;
            background: var(--tg-theme-hint-color);
            border-radius: 14px;
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .toggle.active {
            background: var(--color-success);
        }

        .toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: transform var(--transition-fast);
            box-shadow: var(--shadow-sm);
        }

        .toggle.active::after {
            transform: translateX(20px);
        }

        .danger-zone {
            padding-top: var(--space-lg);
            border-top: 1px solid var(--tg-theme-secondary-bg-color);
        }

        .btn-danger {
            background: var(--color-error-light);
            color: var(--color-error);
        }

        .btn-danger:hover {
            background: var(--color-error);
            color: white;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: TEXTAREA
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid transparent;
            border-radius: var(--radius-md);
            background: var(--tg-theme-secondary-bg-color);
            font-family: inherit;
            font-size: 16px;
            color: var(--tg-theme-text-color);
            transition: all var(--transition-fast);
            resize: vertical;
            min-height: 80px;
        }

        .textarea:focus {
            outline: none;
            border-color: var(--tg-theme-button-color);
            background: var(--tg-theme-bg-color);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: BOTTOM NAVIGATION
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            background: var(--tg-theme-bg-color);
            border-top: 1px solid var(--tg-theme-secondary-bg-color);
            padding: var(--space-sm) 0;
            padding-bottom: max(var(--space-sm), env(safe-area-inset-bottom));
            z-index: 50;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: var(--space-sm) 0;
            color: var(--tg-theme-hint-color);
            cursor: pointer;
            transition: color var(--transition-fast);
            -webkit-tap-highlight-color: transparent;
        }

        .nav-item.active {
            color: var(--color-cyan-500);
        }

        .nav-item-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-item-icon svg {
            width: 22px;
            height: 22px;
            stroke-width: 2;
        }

        .nav-item-label {
            font-size: 11px;
            font-weight: 500;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: SECTIONS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .admin-section {
            display: none;
            animation: fadeIn 0.2s ease;
        }

        .admin-section.active {
            display: block;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           COMPONENTS: REPORT CARDS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .report-card {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
        }

        .report-card-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        .report-card-icon {
            font-size: 24px;
        }

        .report-card-title {
            font-size: 17px;
            font-weight: 600;
            flex: 1;
        }

        .report-card-period {
            font-size: 13px;
            color: var(--tg-theme-hint-color);
            background: var(--tg-theme-bg-color);
            padding: 4px 10px;
            border-radius: var(--radius-full);
        }

        .report-summary {
            font-size: 15px;
            line-height: 1.6;
            color: var(--tg-theme-text-color);
            margin-bottom: var(--space-md);
            white-space: pre-wrap;
        }

        .report-highlights {
            margin-top: var(--space-md);
        }

        .report-highlight {
            display: flex;
            align-items: flex-start;
            gap: var(--space-sm);
            padding: var(--space-sm) 0;
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }

        .report-highlight::before {
            content: "âœ“";
            color: var(--color-success);
            font-weight: bold;
        }

        .report-card-footer {
            margin-top: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid var(--tg-theme-bg-color);
            display: flex;
            justify-content: flex-end;
        }

        /* Agent Report Item */
        .agent-report-item {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .agent-report-item:hover {
            background: var(--color-slate-700);
        }

        .agent-report-header {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .agent-report-icon {
            font-size: 20px;
        }

        .agent-report-name {
            font-weight: 600;
            flex: 1;
        }

        .agent-report-tasks {
            font-size: 13px;
            color: var(--color-cyan-400);
        }

        .agent-report-preview {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
            margin-top: var(--space-sm);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .report-loading {
            text-align: center;
            padding: var(--space-xl);
            color: var(--tg-theme-hint-color);
        }

        .admin-content {
            padding-bottom: 90px;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: STATS GRID
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
            margin-bottom: var(--space-lg);
        }

        .stat-card {
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--color-cyan-500);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--tg-theme-hint-color);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: USAGE BARS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .usage-item {
            margin-bottom: var(--space-md);
        }

        .usage-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-xs);
        }

        .usage-label {
            font-size: 14px;
            color: var(--tg-theme-text-color);
        }

        .usage-value {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }

        .usage-bar {
            height: 8px;
            background: var(--tg-theme-secondary-bg-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .usage-fill {
            height: 100%;
            background: var(--color-cyan-500);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .usage-fill.warning {
            background: var(--color-warning);
        }

        .usage-fill.danger {
            background: var(--color-error);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: SEARCH BOX
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .search-box {
            position: relative;
            margin-bottom: var(--space-md);
        }

        .search-box .input {
            padding-left: 44px;
        }

        .search-icon {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--tg-theme-hint-color);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: SECTION HEADER
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--space-md);
        }

        .section-actions {
            display: flex;
            gap: var(--space-sm);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: COMING SOON BADGE
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .coming-soon-banner {
            background: var(--gradient-warm);
            color: white;
            padding: var(--space-lg);
            border-radius: var(--radius-lg);
            text-align: center;
            margin-bottom: var(--space-lg);
        }

        .coming-soon-banner h3 {
            font-size: 18px;
            margin-bottom: var(--space-sm);
        }

        .coming-soon-banner p {
            opacity: 0.9;
            font-size: 14px;
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: HELP LINKS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .help-link {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-sm);
            cursor: pointer;
            transition: background var(--transition-fast);
        }

        .help-link:active {
            background: var(--tg-theme-bg-color);
        }

        .help-link-icon {
            font-size: 24px;
        }

        .help-link-content {
            flex: 1;
        }

        .help-link-title {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .help-link-subtitle {
            font-size: 14px;
            color: var(--tg-theme-hint-color);
        }

        .help-link-arrow {
            color: var(--tg-theme-hint-color);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: AGENT STATS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .agent-stat-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-sm);
        }

        .agent-stat-icon {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            background: var(--color-cyan-500);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .agent-stat-info {
            flex: 1;
        }

        .agent-stat-name {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .agent-stat-meta {
            font-size: 13px;
            color: var(--tg-theme-hint-color);
        }

        .agent-stat-count {
            text-align: right;
        }

        .agent-stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--color-cyan-500);
        }

        .agent-stat-label {
            font-size: 11px;
            color: var(--tg-theme-hint-color);
        }

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: MEMBER ACTIVITY
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        .member-activity-item {
            display: flex;
            align-items: center;
            gap: var(--space-md);
            padding: var(--space-md);
            background: var(--tg-theme-secondary-bg-color);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-sm);
        }

        .activity-count-badge {
            background: var(--color-cyan-500);
            color: white;
            padding: 2px 8px;
            border-radius: var(--radius-full);
            font-size: 12px;
            font-weight: 600;
        }

        .activity-bots-used {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-top: 4px;
        }

        .bot-mini-chip {
            font-size: 10px;
            padding: 2px 6px;
            background: var(--tg-theme-bg-color);
            border-radius: var(--radius-full);
            color: var(--tg-theme-hint-color);
        }
    </style>
</head>
<body>
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         APPLICATION MARKUP
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

    <div id="app">

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             PAGE: LOADING
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="page-loading" class="page active">
            <div class="loading-center">
                <div class="loading-spinner"></div>
                <p class="text-muted">Loading...</p>
            </div>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             PAGE: ONBOARDING (No org yet)
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="page-onboarding" class="page">
            <div class="onboarding-hero">
                <div class="onboarding-icon">ğŸš€</div>
                <h1 class="onboarding-title">Workforce Hub</h1>
                <p class="onboarding-subtitle">Manage your team and AI agents in one place</p>
            </div>

            <button class="btn btn-primary btn-block mb-md" onclick="showCreateOrgForm()">
                Create Organization
            </button>

            <div class="onboarding-divider">or</div>

            <p class="text-center text-muted text-sm mb-lg">
                Have an invite link? Ask your admin to share it with you on Telegram.
            </p>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             PAGE: JOIN ORG (via invite link)
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="page-join" class="page">
            <div class="page-header">
                <h1 class="page-title">Join Organization</h1>
                <p class="page-subtitle" id="join-org-name">Loading...</p>
            </div>

            <div class="card card-elevated">
                <div class="input-group">
                    <label class="input-label">Your Full Name</label>
                    <input type="text" id="join-name-input" class="input" placeholder="Enter your name">
                </div>

                <p class="text-muted text-sm mb-lg">
                    Your name will be visible to the organization admin for approval.
                </p>

                <button class="btn btn-primary btn-block" id="join-submit-btn" onclick="submitJoinRequest()">
                    Request to Join
                </button>
            </div>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             PAGE: PENDING (Waiting for approval)
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="page-pending" class="page">
            <div class="status-pending">
                <div class="status-icon status-icon-waiting">
                    <svg width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                </div>
                <h2 class="page-title">Awaiting Approval</h2>
                <p class="text-muted" id="pending-message">
                    Your request to join has been sent. The admin will review it shortly.
                </p>
            </div>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             PAGE: ADMIN DASHBOARD
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="page-admin" class="page">
            <div class="admin-content">

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: TEAM
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div id="section-team" class="admin-section active">
                    <!-- Organization Header -->
                    <div class="org-header" id="org-header">
                        <div class="org-avatar" id="org-avatar">A</div>
                        <div class="org-info">
                            <div class="org-name" id="admin-org-name">Organization</div>
                            <div class="org-description hidden" id="org-description"></div>
                            <div class="org-stats" id="org-stats">Loading...</div>
                        </div>
                        <button class="org-edit-btn" onclick="openEditOrgModal()">Edit</button>
                    </div>

                    <!-- Invite Link Card -->
                    <div class="card card-gradient mb-lg" id="invite-card">
                        <div class="card-header">
                            <span class="card-title">Invite Team Members</span>
                            <span class="card-badge" id="invite-status-badge">Share</span>
                        </div>
                        <p class="text-sm mb-md" style="opacity: 0.9;" id="invite-status-text">
                            Share this link with your team via Telegram
                        </p>
                        <div class="invite-box" style="background: rgba(255,255,255,0.15);" id="invite-link-box">
                            <span class="invite-link" id="invite-link-text" style="color: white;">Loading...</span>
                            <button class="invite-copy-btn" id="invite-copy-btn" onclick="copyInviteLink()" style="background: white; color: #667eea;">
                                Copy
                            </button>
                        </div>
                        <button class="btn btn-block hidden" id="regenerate-btn" onclick="regenerateInviteLink()" style="margin-top: 12px; background: rgba(255,255,255,0.2); color: white; border: 2px solid rgba(255,255,255,0.4);">
                            Generate New Link
                        </button>
                    </div>

                    <!-- Period Filter -->
                    <div class="tabs" id="team-period-tabs">
                        <button class="tab active" onclick="setTeamPeriod('day')">Today</button>
                        <button class="tab" onclick="setTeamPeriod('week')">This Week</button>
                        <button class="tab" onclick="setTeamPeriod('month')">This Month</button>
                    </div>

                    <!-- Team Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="team-active-count">0</div>
                            <div class="stat-label">Active Members</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="team-activities-count">0</div>
                            <div class="stat-label">Activities</div>
                        </div>
                    </div>

                    <!-- Tabs -->
                    <div class="tabs">
                        <button class="tab active" onclick="switchAdminTab('requests')">
                            Requests <span id="requests-count"></span>
                        </button>
                        <button class="tab" onclick="switchAdminTab('members')">
                            Members
                        </button>
                    </div>

                    <!-- Pending Requests Tab -->
                    <div id="tab-requests" class="tab-content">
                        <div id="requests-list" class="list">
                            <!-- Populated by JS -->
                        </div>
                        <div id="requests-empty" class="empty-state hidden">
                            <div class="empty-state-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                            </div>
                            <p class="empty-state-title">No pending requests</p>
                            <p>Share your invite link to add team members</p>
                        </div>
                    </div>

                    <!-- Members Tab -->
                    <div id="tab-members" class="tab-content hidden">
                        <div id="members-list" class="list">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: ANALYTICS
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div id="section-analytics" class="admin-section">
                    <div class="page-header">
                        <h1 class="page-title">Analytics</h1>
                        <p class="page-subtitle">Agent performance & usage</p>
                    </div>

                    <!-- Period Filter -->
                    <div class="tabs" id="analytics-period-tabs">
                        <button class="tab active" onclick="setAnalyticsPeriod('day')">Today</button>
                        <button class="tab" onclick="setAnalyticsPeriod('week')">This Week</button>
                        <button class="tab" onclick="setAnalyticsPeriod('month')">This Month</button>
                    </div>

                    <!-- Summary Stats -->
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="analytics-total-tasks">0</div>
                            <div class="stat-label">Tasks Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="analytics-active-agents">0</div>
                            <div class="stat-label">Active Agents</div>
                        </div>
                    </div>

                    <!-- Agent Performance -->
                    <div class="section-title">Agent Performance</div>
                    <div id="agent-stats-list">
                        <!-- Populated by JS -->
                    </div>
                    <div id="agent-stats-empty" class="empty-state hidden">
                        <div class="empty-state-icon">ğŸ“Š</div>
                        <p class="empty-state-title">No activity yet</p>
                        <p>Agent usage will appear here</p>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: REPORTS
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div id="section-reports" class="admin-section">
                    <div class="page-header">
                        <h1 class="page-title">Activity Reports</h1>
                        <p class="page-subtitle">AI-generated productivity insights</p>
                    </div>

                    <!-- Period Filter -->
                    <div class="tabs" id="reports-period-tabs">
                        <button class="tab" onclick="setReportsPeriod('daily')">Daily</button>
                        <button class="tab active" onclick="setReportsPeriod('weekly')">Weekly</button>
                        <button class="tab" onclick="setReportsPeriod('monthly')">Monthly</button>
                    </div>

                    <!-- Team Report Card -->
                    <div id="team-report-card" class="report-card">
                        <div class="report-card-header">
                            <div class="report-card-icon">ğŸ‘¥</div>
                            <div class="report-card-title">Team Activity Report</div>
                            <div class="report-card-period" id="team-report-period">This Week</div>
                        </div>
                        <div class="report-card-body">
                            <p class="report-summary" id="team-report-summary">
                                Loading report...
                            </p>
                            <div class="report-highlights" id="team-report-highlights">
                                <!-- Populated by JS -->
                            </div>
                        </div>
                        <div class="report-card-footer">
                            <button class="btn btn-sm btn-secondary" onclick="regenerateReport('team')">
                                Regenerate
                            </button>
                        </div>
                    </div>

                    <!-- Agent Reports -->
                    <div class="section-title" style="margin-top: var(--space-lg);">Agent Reports</div>
                    <div id="agent-reports-list">
                        <!-- Populated by JS -->
                    </div>
                    <div id="agent-reports-empty" class="empty-state hidden">
                        <div class="empty-state-icon">ğŸ¤–</div>
                        <p class="empty-state-title">No agent reports yet</p>
                        <p>Reports will appear once agents have activity to summarize</p>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: CUSTOMERS
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div id="section-customers" class="admin-section">
                    <div class="page-header">
                        <h1 class="page-title">Customers</h1>
                        <p class="page-subtitle">Customer database</p>
                    </div>

                    <!-- Coming Soon Banner -->
                    <div class="coming-soon-banner">
                        <h3>ğŸš§ Coming Soon</h3>
                        <p>Customer database is under development. You'll be able to manage customers, import/export CSV files, and track customer data.</p>
                    </div>

                    <!-- Preview of what's coming -->
                    <div class="section-title">Features Coming</div>
                    <div class="list">
                        <div class="list-item">
                            <div class="list-item-avatar" style="background: var(--color-success);">ğŸ“‹</div>
                            <div class="list-item-content">
                                <div class="list-item-title">Customer List</div>
                                <div class="list-item-subtitle">View and manage all your customers</div>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="list-item-avatar" style="background: var(--color-warning);">ğŸ“¥</div>
                            <div class="list-item-content">
                                <div class="list-item-title">CSV Import</div>
                                <div class="list-item-subtitle">Bulk import customers from spreadsheets</div>
                            </div>
                        </div>
                        <div class="list-item">
                            <div class="list-item-avatar" style="background: var(--color-cyan-500);">ğŸ“¤</div>
                            <div class="list-item-content">
                                <div class="list-item-title">CSV Export</div>
                                <div class="list-item-subtitle">Export your customer data anytime</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: BILLING
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div id="section-billing" class="admin-section">
                    <div class="page-header">
                        <h1 class="page-title">Billing</h1>
                        <p class="page-subtitle">Subscription & usage</p>
                    </div>

                    <!-- Current Plan Card -->
                    <div class="card card-gradient mb-lg" id="billing-plan-card">
                        <div class="card-header">
                            <span class="card-title">Current Plan</span>
                            <span class="card-badge" id="billing-plan-name">Free</span>
                        </div>
                        <p class="text-sm mb-md" style="opacity: 0.9;" id="billing-plan-description">
                            Get started with basic features
                        </p>
                        <p class="text-sm" style="opacity: 0.7;" id="billing-period-info">
                            <!-- Period info -->
                        </p>
                    </div>

                    <!-- Usage Stats -->
                    <div class="section-title">Current Usage</div>
                    <div class="card">
                        <div class="usage-item">
                            <div class="usage-header">
                                <span class="usage-label">Team Members</span>
                                <span class="usage-value" id="usage-members-text">0 / 3</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-fill" id="usage-members-bar" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="usage-item">
                            <div class="usage-header">
                                <span class="usage-label">Customers</span>
                                <span class="usage-value" id="usage-customers-text">0 / 100</span>
                            </div>
                            <div class="usage-bar">
                                <div class="usage-fill" id="usage-customers-bar" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Invoices -->
                    <div class="section-title" style="margin-top: var(--space-lg);">Invoices</div>
                    <div id="invoices-list">
                        <!-- Populated by JS -->
                    </div>
                    <div id="invoices-empty" class="empty-state">
                        <p class="text-muted">No invoices yet</p>
                    </div>
                </div>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     SECTION: HELP
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <div id="section-help" class="admin-section">
                    <div class="page-header">
                        <h1 class="page-title">Help & Support</h1>
                        <p class="page-subtitle">Get help with Workforce Accelerator</p>
                    </div>

                    <!-- Help Links -->
                    <div class="help-link" onclick="openHelpLink('docs')">
                        <div class="help-link-icon">ğŸ“š</div>
                        <div class="help-link-content">
                            <div class="help-link-title">Documentation</div>
                            <div class="help-link-subtitle">Learn how to use all features</div>
                        </div>
                        <div class="help-link-arrow">â†’</div>
                    </div>

                    <div class="help-link" onclick="openHelpLink('tutorials')">
                        <div class="help-link-icon">ğŸ¥</div>
                        <div class="help-link-content">
                            <div class="help-link-title">Video Tutorials</div>
                            <div class="help-link-subtitle">Watch step-by-step guides</div>
                        </div>
                        <div class="help-link-arrow">â†’</div>
                    </div>

                    <div class="help-link" onclick="openHelpLink('support')">
                        <div class="help-link-icon">ğŸ’¬</div>
                        <div class="help-link-content">
                            <div class="help-link-title">Contact Support</div>
                            <div class="help-link-subtitle">Get help from our team</div>
                        </div>
                        <div class="help-link-arrow">â†’</div>
                    </div>

                    <div class="help-link" onclick="openHelpLink('faq')">
                        <div class="help-link-icon">â“</div>
                        <div class="help-link-content">
                            <div class="help-link-title">FAQ</div>
                            <div class="help-link-subtitle">Frequently asked questions</div>
                        </div>
                        <div class="help-link-arrow">â†’</div>
                    </div>

                    <!-- Version Info -->
                    <div class="text-center text-muted" style="margin-top: var(--space-2xl);">
                        <p style="font-size: 14px;">Workforce Accelerator v2.0</p>
                        <p style="font-size: 12px; margin-top: var(--space-xs);">Made with â¤ï¸ by Apex Solutions</p>
                    </div>
                </div>

            </div>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 BOTTOM NAVIGATION
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <div class="bottom-nav" id="admin-bottom-nav">
                <div class="nav-item active" onclick="switchAdminSection('team')">
                    <div class="nav-item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    </div>
                    <span class="nav-item-label">Team</span>
                </div>
                <div class="nav-item" onclick="switchAdminSection('analytics')">
                    <div class="nav-item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg>
                    </div>
                    <span class="nav-item-label">Analytics</span>
                </div>
                <div class="nav-item" onclick="switchAdminSection('reports')">
                    <div class="nav-item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                    </div>
                    <span class="nav-item-label">Reports</span>
                </div>
                <div class="nav-item" onclick="switchAdminSection('customers')">
                    <div class="nav-item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="5" rx="9" ry="3"></ellipse><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path></svg>
                    </div>
                    <span class="nav-item-label">Customers</span>
                </div>
                <div class="nav-item" onclick="switchAdminSection('billing')">
                    <div class="nav-item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>
                    </div>
                    <span class="nav-item-label">Billing</span>
                </div>
                <div class="nav-item" onclick="switchAdminSection('help')">
                    <div class="nav-item-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    </div>
                    <span class="nav-item-label">Help</span>
                </div>
            </div>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             PAGE: MEMBER DASHBOARD
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="page-member" class="page">
            <div class="page-header">
                <h1 class="page-title" id="member-org-name">Organization</h1>
                <p class="page-subtitle">Your Agents</p>
            </div>

            <div id="member-bots-list" class="list">
                <!-- Populated by JS -->
            </div>

            <div id="member-no-bots" class="empty-state hidden">
                <div class="empty-state-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="10" rx="2"></rect><circle cx="12" cy="5" r="2"></circle><path d="M12 7v4"></path><line x1="8" y1="16" x2="8" y2="16"></line><line x1="16" y1="16" x2="16" y2="16"></line></svg>
                </div>
                <p class="empty-state-title">No agents assigned yet</p>
                <p>Your admin will grant you access to agents soon</p>
            </div>
        </div>

        <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
             PAGE: CREATE ORG FORM
             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
        <div id="page-create-org" class="page">
            <div class="page-header">
                <h1 class="page-title">Create Organization</h1>
                <p class="page-subtitle">Set up your team workspace</p>
            </div>

            <div class="card card-elevated">
                <div class="input-group">
                    <label class="input-label">Your Full Name</label>
                    <input type="text" id="create-admin-name" class="input" placeholder="e.g., John Smith">
                </div>

                <div class="input-group">
                    <label class="input-label">Organization Name</label>
                    <input type="text" id="create-org-name" class="input" placeholder="e.g., Acme Corp">
                </div>

                <button class="btn btn-primary btn-block" onclick="createOrganization()">
                    Create Organization
                </button>
            </div>

            <button class="btn btn-secondary btn-block mt-auto" onclick="showPage('onboarding')">
                Back
            </button>
        </div>

    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MODAL: APPROVE REQUEST
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="modal-approve" class="modal-backdrop">
        <div class="modal-sheet">
            <div class="modal-handle"></div>

            <h2 class="modal-title">Approve Request</h2>

            <div class="list-item mb-lg">
                <div class="list-item-avatar" id="modal-user-avatar">?</div>
                <div class="list-item-content">
                    <div class="list-item-title" id="modal-user-name">User Name</div>
                    <div class="list-item-subtitle" id="modal-user-username">@username</div>
                </div>
            </div>

            <p class="input-label">Grant access to agents:</p>
            <div class="chips-group mb-lg" id="modal-bots-chips">
                <!-- Populated by JS -->
            </div>

            <div style="display: flex; gap: var(--space-sm);">
                <button class="btn btn-secondary" style="flex: 1;" onclick="rejectRequest()">
                    Reject
                </button>
                <button class="btn btn-success" style="flex: 2;" onclick="approveRequest()">
                    Approve
                </button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MODAL: EDIT ORGANIZATION
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="modal-edit-org" class="modal-backdrop">
        <div class="modal-sheet">
            <div class="modal-handle"></div>

            <h2 class="modal-title">Edit Organization</h2>

            <div class="input-group">
                <label class="input-label">Organization Name</label>
                <input type="text" id="edit-org-name" class="input" placeholder="Organization name">
            </div>

            <div class="input-group">
                <label class="input-label">Description (optional)</label>
                <textarea id="edit-org-description" class="textarea" placeholder="Describe your organization..."></textarea>
            </div>

            <div style="display: flex; gap: var(--space-sm);">
                <button class="btn btn-secondary" style="flex: 1;" onclick="closeEditOrgModal()">
                    Cancel
                </button>
                <button class="btn btn-primary" style="flex: 2;" onclick="saveOrgChanges()">
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         MODAL: MEMBER MANAGEMENT
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="modal-member" class="modal-backdrop">
        <div class="modal-sheet">
            <div class="modal-handle"></div>

            <div class="member-detail-header">
                <div class="member-detail-avatar" id="member-modal-avatar">?</div>
                <div class="member-detail-info">
                    <div class="member-detail-name" id="member-modal-name">Member Name</div>
                    <div class="member-detail-meta" id="member-modal-meta">@username â€¢ Member</div>
                </div>
            </div>

            <div class="mb-lg">
                <p class="text-sm text-muted" id="member-modal-activity">Last active: Never</p>
            </div>

            <div class="section-title">Agent Access</div>
            <div class="bot-toggle-list" id="member-modal-bots">
                <!-- Populated by JS -->
            </div>

            <button class="btn btn-primary btn-block mb-lg" onclick="saveMemberBots()">
                Save Changes
            </button>

            <div class="danger-zone" id="member-danger-zone">
                <div class="section-title">Danger Zone</div>
                <button class="btn btn-danger btn-block" onclick="confirmRemoveMember()">
                    Remove from Organization
                </button>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         APPLICATION LOGIC
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           TELEGRAM INTEGRATION
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // Apply Telegram theme
        const applyTheme = () => {
            const root = document.documentElement;
            if (tg.themeParams) {
                Object.entries(tg.themeParams).forEach(([key, value]) => {
                    const cssVar = `--tg-theme-${key.replace(/_/g, '-')}`;
                    root.style.setProperty(cssVar, value);
                });
            }
        };
        applyTheme();
        tg.onEvent('themeChanged', applyTheme);

        // Parse start parameter (for invite links)
        const getStartParam = () => {
            const startParam = tg.initDataUnsafe?.start_param;
            if (startParam && startParam.startsWith('invite_')) {
                return { type: 'invite', code: startParam.replace('invite_', '') };
            }
            return null;
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           STATE
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const state = {
            user: null,
            memberships: [],
            pendingRequests: [],
            currentOrg: null,
            currentMembership: null,
            orgDetails: null,
            inviteLink: null,
            membershipRequests: [],
            members: [],
            availableBots: [],
            // For approval modal
            selectedRequest: null,
            selectedBotIds: [],
            // For member modal
            selectedMember: null,
            selectedMemberBotIds: [],
            // Admin dashboard sections
            currentAdminSection: 'team',
            teamPeriod: 'week',
            analyticsPeriod: 'week',
            teamAnalytics: null,
            agentAnalytics: null,
            billingOverview: null
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           API
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const API_BASE = '/api/hub';

        const api = {
            async fetch(endpoint, options = {}) {
                const res = await fetch(`${API_BASE}${endpoint}`, {
                    ...options,
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Telegram-Init-Data': tg.initData,
                        ...options.headers
                    }
                });

                if (!res.ok) {
                    const error = await res.json().catch(() => ({ detail: 'Request failed' }));
                    throw new Error(error.detail || `Error ${res.status}`);
                }

                return res.json();
            },

            getMe: () => api.fetch('/me'),
            createOrg: (name, adminFullName) => api.fetch('/orgs', {
                method: 'POST',
                body: JSON.stringify({ name, admin_full_name: adminFullName })
            }),
            getOrgDetails: (orgId) => api.fetch(`/orgs/${orgId}/details`),
            updateOrg: (orgId, data) => api.fetch(`/orgs/${orgId}`, {
                method: 'PATCH',
                body: JSON.stringify(data)
            }),
            getInviteLink: (orgId) => api.fetch(`/orgs/${orgId}/invite-link`),
            regenerateInviteLink: (orgId) => api.fetch(`/orgs/${orgId}/regenerate-invite`, {
                method: 'POST'
            }),
            getInviteInfo: (code) => api.fetch(`/invite/${code}`),
            submitJoinRequest: (inviteCode, fullName) => api.fetch('/membership-requests', {
                method: 'POST',
                body: JSON.stringify({ invite_code: inviteCode, full_name: fullName })
            }),
            getMembershipRequests: (orgId) => api.fetch(`/orgs/${orgId}/membership-requests`),
            getMembers: (orgId) => api.fetch(`/orgs/${orgId}/members`),
            removeMember: (orgId, memberId) => api.fetch(`/orgs/${orgId}/members/${memberId}`, {
                method: 'DELETE'
            }),
            updateMemberBots: (orgId, memberId, botIds) => api.fetch(`/orgs/${orgId}/members/${memberId}/bots`, {
                method: 'PUT',
                body: JSON.stringify({ bot_ids: botIds })
            }),
            getBots: () => api.fetch('/bots'),
            approveRequest: (requestId, approved, botIds) => api.fetch(`/membership-requests/${requestId}/approve`, {
                method: 'POST',
                body: JSON.stringify({ request_id: requestId, approved, bot_ids: botIds })
            }),
            // Admin analytics
            getTeamAnalytics: (orgId, period = 'week') => api.fetch(`/orgs/${orgId}/analytics/team?period=${period}`),
            getAgentAnalytics: (orgId, period = 'week') => api.fetch(`/orgs/${orgId}/analytics/agents?period=${period}`),
            // Activity Reports
            getLatestReports: (orgId, periodType = 'weekly') => api.fetch(`/orgs/${orgId}/reports/latest?period_type=${periodType}`),
            generateReport: (orgId, data) => api.fetch(`/orgs/${orgId}/reports/generate`, {
                method: 'POST',
                body: JSON.stringify(data)
            }),
            // Billing
            getBillingOverview: (orgId) => api.fetch(`/orgs/${orgId}/billing`),
            getPlans: () => api.fetch('/plans'),
            // Activity logging
            logActivity: (orgId, botId, actionType, actionDetail = {}) => api.fetch('/activity', {
                method: 'POST',
                body: JSON.stringify({ org_id: orgId, bot_id: botId, action_type: actionType, action_detail: actionDetail })
            })
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           PAGE NAVIGATION
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const showPage = (pageName) => {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(`page-${pageName}`)?.classList.add('active');
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           INITIALIZATION
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const init = async () => {
            try {
                // Get user data FIRST to check existing membership status
                const data = await api.getMe();
                console.log('[Hub Init] API response:', JSON.stringify(data, null, 2));

                state.user = data.user;
                state.memberships = data.memberships || [];
                state.pendingRequests = data.pending_requests || [];

                console.log('[Hub Init] User:', state.user?.id, state.user?.full_name);
                console.log('[Hub Init] Memberships count:', state.memberships.length);
                console.log('[Hub Init] Pending requests count:', state.pendingRequests.length);

                // Check if user has pending requests
                if (state.pendingRequests.length > 0) {
                    const request = state.pendingRequests[0];
                    console.log('[Hub Init] Showing pending page for request:', request.id);
                    document.getElementById('pending-message').textContent =
                        `Your request to join "${request.organizations?.name || 'the organization'}" is being reviewed.`;
                    showPage('pending');
                    return;
                }

                // Check if user has memberships (prioritize existing membership over invite links)
                if (state.memberships.length > 0) {
                    const membership = state.memberships[0];
                    console.log('[Hub Init] Found membership:', membership.id, 'role:', membership.role);
                    state.currentOrg = membership.organizations;
                    state.currentMembership = membership;

                    if (membership.role === 'admin') {
                        console.log('[Hub Init] Loading admin dashboard');
                        await loadAdminDashboard();
                    } else {
                        console.log('[Hub Init] Loading member dashboard');
                        await loadMemberDashboard();
                    }
                    return;
                }

                // No membership or pending request - check for invite link
                const startParam = getStartParam();
                console.log('[Hub Init] No membership found. Start param:', startParam);

                if (startParam?.type === 'invite') {
                    console.log('[Hub Init] Handling invite link:', startParam.code);
                    await handleInviteLink(startParam.code);
                    return;
                }

                // No membership and no invite link - show onboarding
                console.log('[Hub Init] Showing onboarding page');
                showPage('onboarding');

            } catch (error) {
                console.error('[Hub Init] Error:', error);

                // On error, still try to handle invite link if present
                const startParam = getStartParam();
                if (startParam?.type === 'invite') {
                    console.log('[Hub Init] Error occurred, but handling invite link:', startParam.code);
                    await handleInviteLink(startParam.code);
                } else {
                    console.log('[Hub Init] Error occurred, showing onboarding');
                    showPage('onboarding');
                }
            }
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           INVITE LINK HANDLING
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        let currentInviteCode = null;

        const handleInviteLink = async (code) => {
            try {
                const info = await api.getInviteInfo(code);
                currentInviteCode = code;

                document.getElementById('join-org-name').textContent = `Join "${info.org_name}"`;
                document.getElementById('join-name-input').value = state.user?.full_name || '';

                showPage('join');
            } catch (error) {
                // Check if it's an expiration error (410 status)
                if (error.message.includes('expired')) {
                    alert('This invite link has expired. Please ask the organization admin for a new link.');
                } else {
                    alert('Invalid invite link. Please check the link and try again.');
                }
                showPage('onboarding');
            }
        };

        const submitJoinRequest = async () => {
            const nameInput = document.getElementById('join-name-input');
            const submitBtn = document.getElementById('join-submit-btn');
            const name = nameInput.value.trim();

            if (!name) {
                alert('Please enter your name');
                return;
            }

            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';

            try {
                const result = await api.submitJoinRequest(currentInviteCode, name);
                document.getElementById('pending-message').textContent =
                    `Your request to join "${result.org_name}" has been sent. The admin will review it shortly.`;
                showPage('pending');
            } catch (error) {
                alert(error.message);
                submitBtn.disabled = false;
                submitBtn.textContent = 'Request to Join';
            }
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           CREATE ORGANIZATION
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const showCreateOrgForm = () => {
            showPage('create-org');
        };

        const createOrganization = async () => {
            const adminNameInput = document.getElementById('create-admin-name');
            const orgNameInput = document.getElementById('create-org-name');
            const adminName = adminNameInput.value.trim();
            const orgName = orgNameInput.value.trim();

            if (!adminName) {
                alert('Please enter your full name');
                return;
            }

            if (!orgName) {
                alert('Please enter an organization name');
                return;
            }

            try {
                const org = await api.createOrg(orgName, adminName);
                state.currentOrg = org;
                state.currentMembership = { role: 'admin' };
                await loadAdminDashboard();
            } catch (error) {
                alert(error.message);
            }
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const loadAdminDashboard = async () => {
            showPage('admin');

            // Load data in parallel
            const [orgDetails, inviteLink, requests, members, bots] = await Promise.all([
                api.getOrgDetails(state.currentOrg.id),
                api.getInviteLink(state.currentOrg.id),
                api.getMembershipRequests(state.currentOrg.id),
                api.getMembers(state.currentOrg.id),
                api.getBots().catch(() => [])
            ]);

            state.orgDetails = orgDetails;
            state.inviteLink = inviteLink;
            state.membershipRequests = requests;
            state.members = members;
            state.availableBots = bots;

            updateOrgHeader(orgDetails);
            updateInviteLinkDisplay(inviteLink);
            renderRequests();
            renderMembers();

            // Load team analytics for the default section
            await loadTeamAnalytics();

            // Log page view activity
            api.logActivity(state.currentOrg.id, null, 'page_view', { section: 'team' }).catch(() => {});
        };

        const updateOrgHeader = (details) => {
            const initials = details.name.split(' ').map(w => w[0]).join('').substring(0, 2).toUpperCase();
            document.getElementById('org-avatar').textContent = initials;
            document.getElementById('admin-org-name').textContent = details.name;

            const descEl = document.getElementById('org-description');
            if (details.description) {
                descEl.textContent = details.description;
                descEl.classList.remove('hidden');
            } else {
                descEl.classList.add('hidden');
            }

            const createdDate = new Date(details.created_at).toLocaleDateString('en-US', {
                month: 'short',
                year: 'numeric'
            });
            document.getElementById('org-stats').textContent =
                `Created ${createdDate} â€¢ ${details.stats.member_count} member${details.stats.member_count !== 1 ? 's' : ''}`;
        };

        const updateInviteLinkDisplay = (inviteLink) => {
            const linkText = document.getElementById('invite-link-text');
            const statusBadge = document.getElementById('invite-status-badge');
            const statusText = document.getElementById('invite-status-text');
            const copyBtn = document.getElementById('invite-copy-btn');
            const regenerateBtn = document.getElementById('regenerate-btn');
            const card = document.getElementById('invite-card');

            linkText.textContent = inviteLink.url;

            if (inviteLink.is_expired) {
                // Link is expired
                statusBadge.textContent = 'Expired';
                statusBadge.style.background = 'rgba(239, 68, 68, 0.3)';
                statusText.textContent = 'This invite link has expired. Generate a new one to invite team members.';
                copyBtn.classList.add('hidden');
                regenerateBtn.classList.remove('hidden');
                card.style.background = 'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)';
            } else {
                // Link is active - show time remaining
                const expiresAt = new Date(inviteLink.expires_at);
                const now = new Date();
                const hoursLeft = Math.max(0, Math.floor((expiresAt - now) / (1000 * 60 * 60)));
                const minsLeft = Math.max(0, Math.floor(((expiresAt - now) % (1000 * 60 * 60)) / (1000 * 60)));

                statusBadge.textContent = `${hoursLeft}h ${minsLeft}m left`;
                statusBadge.style.background = 'rgba(255, 255, 255, 0.2)';
                statusText.textContent = 'Share this link with your team via Telegram';
                copyBtn.classList.remove('hidden');
                regenerateBtn.classList.add('hidden');
                card.style.background = 'var(--gradient-accent)';
            }
        };

        const regenerateInviteLink = async () => {
            const btn = document.getElementById('regenerate-btn');
            btn.disabled = true;
            btn.textContent = 'Generating...';

            try {
                const newLink = await api.regenerateInviteLink(state.currentOrg.id);
                state.inviteLink = newLink;
                updateInviteLinkDisplay(newLink);
            } catch (error) {
                alert(error.message);
            } finally {
                btn.disabled = false;
                btn.textContent = 'Generate New Link';
            }
        };

        const switchAdminTab = (tab) => {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.tab[onclick="switchAdminTab('${tab}')"]`).classList.add('active');

            document.getElementById('tab-requests').classList.toggle('hidden', tab !== 'requests');
            document.getElementById('tab-members').classList.toggle('hidden', tab !== 'members');
        };

        const copyInviteLink = async () => {
            try {
                await navigator.clipboard.writeText(state.inviteLink.url);

                // Visual feedback
                const btn = document.getElementById('invite-copy-btn');
                btn.textContent = 'Copied!';
                setTimeout(() => btn.textContent = 'Copy', 2000);
            } catch {
                // Fallback for older browsers
                alert('Link: ' + state.inviteLink.url);
            }
        };

        const renderRequests = () => {
            const list = document.getElementById('requests-list');
            const empty = document.getElementById('requests-empty');
            const countBadge = document.getElementById('requests-count');

            if (state.membershipRequests.length === 0) {
                list.classList.add('hidden');
                empty.classList.remove('hidden');
                countBadge.textContent = '';
                return;
            }

            list.classList.remove('hidden');
            empty.classList.add('hidden');
            countBadge.textContent = `(${state.membershipRequests.length})`;

            list.innerHTML = state.membershipRequests.map(req => `
                <div class="list-item list-item-clickable" onclick="openApproveModal('${req.id}')">
                    <div class="list-item-avatar">${req.full_name.charAt(0).toUpperCase()}</div>
                    <div class="list-item-content">
                        <div class="list-item-title">${escapeHtml(req.full_name)}</div>
                        <div class="list-item-subtitle">${req.telegram_username ? '@' + req.telegram_username : 'Pending'}</div>
                    </div>
                    <div class="list-item-action">
                        <span class="chip chip-warning">Review</span>
                    </div>
                </div>
            `).join('');
        };

        const renderMembers = () => {
            const list = document.getElementById('members-list');

            list.innerHTML = state.members.map(member => {
                const lastActive = member.last_active_at
                    ? formatTimeAgo(new Date(member.last_active_at))
                    : 'Never';

                const activityCount = member.activity_count || 0;
                const botsUsed = member.bots_accessed || [];

                return `
                <div class="list-item ${member.role !== 'admin' ? 'list-item-clickable' : ''}"
                     ${member.role !== 'admin' ? `onclick="openMemberModal('${member.id}')"` : ''}>
                    <div class="list-item-avatar">${member.full_name.charAt(0).toUpperCase()}</div>
                    <div class="list-item-content">
                        <div class="list-item-title">${escapeHtml(member.full_name)}</div>
                        <div class="list-item-subtitle">
                            ${member.role === 'admin' ? 'ğŸ‘‘ Admin' : `${member.bot_access.length} agents â€¢ Active ${lastActive}`}
                        </div>
                        ${botsUsed.length > 0 ? `
                            <div class="activity-bots-used">
                                ${botsUsed.slice(0, 3).map(botId => `<span class="bot-mini-chip">${botId}</span>`).join('')}
                                ${botsUsed.length > 3 ? `<span class="bot-mini-chip">+${botsUsed.length - 3}</span>` : ''}
                            </div>
                        ` : ''}
                    </div>
                    ${member.role === 'admin'
                        ? '<span class="chip">Admin</span>'
                        : activityCount > 0
                            ? `<span class="activity-count-badge">${activityCount}</span>`
                            : '<span class="chip">Manage</span>'}
                </div>
            `;
            }).join('');
        };

        const formatTimeAgo = (date) => {
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);

            if (diffMins < 1) return 'just now';
            if (diffMins < 60) return `${diffMins}m ago`;
            if (diffHours < 24) return `${diffHours}h ago`;
            if (diffDays < 7) return `${diffDays}d ago`;
            return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           APPROVAL MODAL
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const openApproveModal = (requestId) => {
            const request = state.membershipRequests.find(r => r.id === requestId);
            if (!request) return;

            state.selectedRequest = request;
            state.selectedBotIds = [];

            document.getElementById('modal-user-name').textContent = request.full_name;
            document.getElementById('modal-user-username').textContent =
                request.telegram_username ? '@' + request.telegram_username : 'No username';
            document.getElementById('modal-user-avatar').textContent =
                request.full_name.charAt(0).toUpperCase();

            // Render bot chips
            const chipsContainer = document.getElementById('modal-bots-chips');
            if (state.availableBots.length > 0) {
                chipsContainer.innerHTML = state.availableBots.map(bot => `
                    <button class="chip chip-selectable" data-bot-id="${bot.id}" onclick="toggleBotSelection('${bot.id}')">
                        ${escapeHtml(bot.name)}
                    </button>
                `).join('');
            } else {
                chipsContainer.innerHTML = '<p class="text-muted text-sm">No agents available yet</p>';
            }

            document.getElementById('modal-approve').classList.add('active');
        };

        const closeApproveModal = () => {
            document.getElementById('modal-approve').classList.remove('active');
            state.selectedRequest = null;
            state.selectedBotIds = [];
        };

        const toggleBotSelection = (botId) => {
            const index = state.selectedBotIds.indexOf(botId);
            if (index > -1) {
                state.selectedBotIds.splice(index, 1);
            } else {
                state.selectedBotIds.push(botId);
            }

            // Update chip visual
            const chip = document.querySelector(`[data-bot-id="${botId}"]`);
            chip?.classList.toggle('selected', state.selectedBotIds.includes(botId));
        };

        const approveRequest = async () => {
            if (!state.selectedRequest) return;

            try {
                await api.approveRequest(state.selectedRequest.id, true, state.selectedBotIds);

                // Remove from list and refresh
                state.membershipRequests = state.membershipRequests.filter(
                    r => r.id !== state.selectedRequest.id
                );
                closeApproveModal();
                renderRequests();

                // Refresh members
                const members = await api.getMembers(state.currentOrg.id);
                state.members = members;
                renderMembers();

            } catch (error) {
                alert(error.message);
            }
        };

        const rejectRequest = async () => {
            if (!state.selectedRequest) return;

            if (!confirm('Are you sure you want to reject this request?')) return;

            try {
                await api.approveRequest(state.selectedRequest.id, false, []);

                state.membershipRequests = state.membershipRequests.filter(
                    r => r.id !== state.selectedRequest.id
                );
                closeApproveModal();
                renderRequests();

            } catch (error) {
                alert(error.message);
            }
        };

        // Close modal on backdrop click
        document.getElementById('modal-approve').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-backdrop')) {
                closeApproveModal();
            }
        });

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           EDIT ORGANIZATION MODAL
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const openEditOrgModal = () => {
            document.getElementById('edit-org-name').value = state.orgDetails?.name || state.currentOrg.name;
            document.getElementById('edit-org-description').value = state.orgDetails?.description || '';
            document.getElementById('modal-edit-org').classList.add('active');
        };

        const closeEditOrgModal = () => {
            document.getElementById('modal-edit-org').classList.remove('active');
        };

        const saveOrgChanges = async () => {
            const name = document.getElementById('edit-org-name').value.trim();
            const description = document.getElementById('edit-org-description').value.trim();

            if (!name) {
                alert('Organization name is required');
                return;
            }

            try {
                const result = await api.updateOrg(state.currentOrg.id, {
                    name,
                    description: description || null
                });

                // Update local state
                state.currentOrg.name = name;
                if (state.orgDetails) {
                    state.orgDetails.name = name;
                    state.orgDetails.description = description || null;
                    updateOrgHeader(state.orgDetails);
                }

                closeEditOrgModal();
            } catch (error) {
                alert(error.message);
            }
        };

        document.getElementById('modal-edit-org').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-backdrop')) {
                closeEditOrgModal();
            }
        });

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           MEMBER MANAGEMENT MODAL
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const openMemberModal = (memberId) => {
            const member = state.members.find(m => m.id === memberId);
            if (!member || member.role === 'admin') return;

            state.selectedMember = member;
            state.selectedMemberBotIds = member.bot_access.map(b => b.bot_id);

            document.getElementById('member-modal-avatar').textContent = member.full_name.charAt(0).toUpperCase();
            document.getElementById('member-modal-name').textContent = member.full_name;
            document.getElementById('member-modal-meta').textContent =
                `${member.telegram_username ? '@' + member.telegram_username : 'No username'} â€¢ Member`;

            const lastActive = member.last_active_at
                ? `Last active: ${formatTimeAgo(new Date(member.last_active_at))}`
                : 'Last active: Never';
            document.getElementById('member-modal-activity').textContent = lastActive;

            // Render bot toggles
            const botsContainer = document.getElementById('member-modal-bots');
            if (state.availableBots.length > 0) {
                botsContainer.innerHTML = state.availableBots.map(bot => {
                    const hasAccess = state.selectedMemberBotIds.includes(bot.id);
                    return `
                        <div class="bot-toggle-item">
                            <span class="bot-toggle-name">${escapeHtml(bot.name)}</span>
                            <div class="toggle ${hasAccess ? 'active' : ''}"
                                 data-bot-id="${bot.id}"
                                 onclick="toggleMemberBot('${bot.id}')"></div>
                        </div>
                    `;
                }).join('');
            } else {
                botsContainer.innerHTML = '<p class="text-muted text-sm">No agents available</p>';
            }

            document.getElementById('modal-member').classList.add('active');
        };

        const closeMemberModal = () => {
            document.getElementById('modal-member').classList.remove('active');
            state.selectedMember = null;
            state.selectedMemberBotIds = [];
        };

        const toggleMemberBot = (botId) => {
            const index = state.selectedMemberBotIds.indexOf(botId);
            if (index > -1) {
                state.selectedMemberBotIds.splice(index, 1);
            } else {
                state.selectedMemberBotIds.push(botId);
            }

            // Update toggle visual
            const toggle = document.querySelector(`#member-modal-bots [data-bot-id="${botId}"]`);
            toggle?.classList.toggle('active', state.selectedMemberBotIds.includes(botId));
        };

        const saveMemberBots = async () => {
            if (!state.selectedMember) return;

            try {
                await api.updateMemberBots(
                    state.currentOrg.id,
                    state.selectedMember.id,
                    state.selectedMemberBotIds
                );

                // Refresh members list
                const members = await api.getMembers(state.currentOrg.id);
                state.members = members;
                renderMembers();

                closeMemberModal();
            } catch (error) {
                alert(error.message);
            }
        };

        const confirmRemoveMember = async () => {
            if (!state.selectedMember) return;

            const confirmed = confirm(
                `Remove ${state.selectedMember.full_name} from ${state.currentOrg.name}?\n\nThis will revoke all their agent access.`
            );

            if (!confirmed) return;

            try {
                await api.removeMember(state.currentOrg.id, state.selectedMember.id);

                // Refresh members list and org details
                const [members, orgDetails] = await Promise.all([
                    api.getMembers(state.currentOrg.id),
                    api.getOrgDetails(state.currentOrg.id)
                ]);
                state.members = members;
                state.orgDetails = orgDetails;
                renderMembers();
                updateOrgHeader(orgDetails);

                closeMemberModal();
            } catch (error) {
                alert(error.message);
            }
        };

        document.getElementById('modal-member').addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-backdrop')) {
                closeMemberModal();
            }
        });

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           MEMBER DASHBOARD
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const loadMemberDashboard = async () => {
            document.getElementById('member-org-name').textContent = state.currentOrg.name;
            showPage('member');

            // Get member's bot access
            const members = await api.getMembers(state.currentOrg.id);
            const me = members.find(m => m.user_id === state.user.id);

            if (me && me.bot_access.length > 0) {
                document.getElementById('member-no-bots').classList.add('hidden');
                document.getElementById('member-bots-list').innerHTML = me.bot_access.map(bot => `
                    <div class="list-item list-item-clickable" onclick="openAgent('${bot.bot_id}')">
                        <div class="list-item-avatar" style="background: var(--color-success);">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="10" rx="2"></rect><circle cx="12" cy="5" r="2"></circle><path d="M12 7v4"></path><circle cx="8" cy="16" r="1" fill="currentColor"></circle><circle cx="16" cy="16" r="1" fill="currentColor"></circle></svg>
                        </div>
                        <div class="list-item-content">
                            <div class="list-item-title">${escapeHtml(bot.bot_name)}</div>
                            <div class="list-item-subtitle">Access granted</div>
                        </div>
                        <span class="chip chip-success">Active</span>
                    </div>
                `).join('');
            } else {
                document.getElementById('member-bots-list').classList.add('hidden');
                document.getElementById('member-no-bots').classList.remove('hidden');
            }
        };

        const openAgent = (agentName) => {
            // Navigate to the agent's mini-app
            window.location.href = `/app/${agentName}`;
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           UTILITIES
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const escapeHtml = (text) => {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: SECTION NAVIGATION
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const switchAdminSection = async (section) => {
            state.currentAdminSection = section;

            // Update nav items
            document.querySelectorAll('#admin-bottom-nav .nav-item').forEach(item => {
                item.classList.remove('active');
            });
            document.querySelector(`#admin-bottom-nav .nav-item[onclick="switchAdminSection('${section}')"]`)?.classList.add('active');

            // Update sections
            document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
            document.getElementById(`section-${section}`)?.classList.add('active');

            // Load section-specific data
            if (section === 'team' && !state.teamAnalytics) {
                await loadTeamAnalytics();
            } else if (section === 'analytics' && !state.agentAnalytics) {
                await loadAgentAnalytics();
            } else if (section === 'reports' && !state.activityReports) {
                await loadReports();
            } else if (section === 'billing' && !state.billingOverview) {
                await loadBillingOverview();
            }

            // Log activity
            if (state.currentOrg) {
                api.logActivity(state.currentOrg.id, null, 'page_view', { section }).catch(() => {});
            }
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: TEAM ANALYTICS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const setTeamPeriod = async (period) => {
            state.teamPeriod = period;

            // Update tab visuals
            document.querySelectorAll('#team-period-tabs .tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`#team-period-tabs .tab[onclick="setTeamPeriod('${period}')"]`)?.classList.add('active');

            await loadTeamAnalytics();
        };

        const loadTeamAnalytics = async () => {
            if (!state.currentOrg) return;

            try {
                const analytics = await api.getTeamAnalytics(state.currentOrg.id, state.teamPeriod);
                state.teamAnalytics = analytics;
                renderTeamAnalytics(analytics);
            } catch (error) {
                console.error('Failed to load team analytics:', error);
                // Show default values
                document.getElementById('team-active-count').textContent = state.members?.length || 0;
                document.getElementById('team-activities-count').textContent = '0';
            }
        };

        const renderTeamAnalytics = (analytics) => {
            document.getElementById('team-active-count').textContent = analytics.active_members;
            document.getElementById('team-activities-count').textContent = analytics.total_activities;

            // Update members list with activity data
            if (analytics.members && analytics.members.length > 0) {
                renderMembersWithActivity(analytics.members);
            }
        };

        const renderMembersWithActivity = (memberActivities) => {
            // Merge activity data with members
            const memberMap = new Map(memberActivities.map(m => [m.membership_id, m]));

            state.members.forEach(member => {
                const activity = memberMap.get(member.id);
                if (activity) {
                    member.activity_count = activity.activity_count;
                    member.bots_accessed = activity.bots_accessed;
                }
            });

            renderMembers();
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: AGENT ANALYTICS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const setAnalyticsPeriod = async (period) => {
            state.analyticsPeriod = period;

            // Update tab visuals
            document.querySelectorAll('#analytics-period-tabs .tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`#analytics-period-tabs .tab[onclick="setAnalyticsPeriod('${period}')"]`)?.classList.add('active');

            await loadAgentAnalytics();
        };

        const loadAgentAnalytics = async () => {
            if (!state.currentOrg) return;

            try {
                const analytics = await api.getAgentAnalytics(state.currentOrg.id, state.analyticsPeriod);
                state.agentAnalytics = analytics;
                renderAgentAnalytics(analytics);
            } catch (error) {
                console.error('Failed to load agent analytics:', error);
                document.getElementById('analytics-total-tasks').textContent = '0';
                document.getElementById('analytics-active-agents').textContent = '0';
                document.getElementById('agent-stats-list').innerHTML = '';
                document.getElementById('agent-stats-empty').classList.remove('hidden');
            }
        };

        const renderAgentAnalytics = (analytics) => {
            document.getElementById('analytics-total-tasks').textContent = analytics.total_tasks;

            const activeAgents = analytics.agents.filter(a => a.active_users > 0).length;
            document.getElementById('analytics-active-agents').textContent = activeAgents;

            const list = document.getElementById('agent-stats-list');
            const empty = document.getElementById('agent-stats-empty');

            if (analytics.agents.length === 0) {
                list.innerHTML = '';
                empty.classList.remove('hidden');
                return;
            }

            empty.classList.add('hidden');
            list.innerHTML = analytics.agents.map(agent => `
                <div class="agent-stat-item">
                    <div class="agent-stat-icon">${agent.bot_icon || 'ğŸ¤–'}</div>
                    <div class="agent-stat-info">
                        <div class="agent-stat-name">${escapeHtml(agent.bot_name)}</div>
                        <div class="agent-stat-meta">${agent.active_users} active user${agent.active_users !== 1 ? 's' : ''}</div>
                    </div>
                    <div class="agent-stat-count">
                        <div class="agent-stat-value">${agent.task_count}</div>
                        <div class="agent-stat-label">tasks</div>
                    </div>
                </div>
            `).join('');
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: ACTIVITY REPORTS
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        let reportsPeriod = 'weekly';

        const setReportsPeriod = async (period) => {
            reportsPeriod = period;

            // Update tab UI
            document.querySelectorAll('#reports-period-tabs .tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`#reports-period-tabs .tab[onclick="setReportsPeriod('${period}')"]`)?.classList.add('active');

            // Reload reports
            await loadReports();
        };

        const loadReports = async () => {
            if (!state.currentOrg) return;

            try {
                const response = await api.getLatestReports(state.currentOrg.id, reportsPeriod);
                state.activityReports = response;
                renderReports(response);
            } catch (error) {
                console.error('Failed to load reports:', error);
                renderReportsError();
            }
        };

        const renderReports = (data) => {
            // Render team report
            const teamSummary = document.getElementById('team-report-summary');
            const teamHighlights = document.getElementById('team-report-highlights');
            const teamPeriod = document.getElementById('team-report-period');

            if (data.team_report) {
                teamPeriod.textContent = formatReportPeriod(data.team_report.period_type, data.team_report.period_start);
                teamSummary.textContent = data.team_report.summary_text;

                if (data.team_report.highlights && data.team_report.highlights.length > 0) {
                    teamHighlights.innerHTML = data.team_report.highlights.map(h =>
                        `<div class="report-highlight">${escapeHtml(h)}</div>`
                    ).join('');
                } else {
                    teamHighlights.innerHTML = '';
                }
            } else {
                teamSummary.textContent = 'No team report available for this period. Click "Regenerate" to create one.';
                teamHighlights.innerHTML = '';
                teamPeriod.textContent = getPeriodLabel(reportsPeriod);
            }

            // Render agent reports
            const agentList = document.getElementById('agent-reports-list');
            const agentEmpty = document.getElementById('agent-reports-empty');

            if (data.agent_reports && data.agent_reports.length > 0) {
                agentList.innerHTML = data.agent_reports.map(report => `
                    <div class="agent-report-item" onclick="openAgentReport('${report.id}')">
                        <div class="agent-report-header">
                            <div class="agent-report-icon">${getBotIcon(report.bot_id)}</div>
                            <div class="agent-report-name">${getBotName(report.bot_id)}</div>
                            <div class="agent-report-tasks">${report.raw_metrics?.total_tasks || 0} tasks</div>
                        </div>
                        <div class="agent-report-preview">${escapeHtml(report.summary_text.substring(0, 150))}...</div>
                    </div>
                `).join('');
                agentList.classList.remove('hidden');
                agentEmpty.classList.add('hidden');
            } else {
                agentList.innerHTML = '';
                agentList.classList.add('hidden');
                agentEmpty.classList.remove('hidden');
            }
        };

        const renderReportsError = () => {
            document.getElementById('team-report-summary').textContent = 'Failed to load reports. Please try again.';
            document.getElementById('team-report-highlights').innerHTML = '';
            document.getElementById('agent-reports-list').innerHTML = '';
            document.getElementById('agent-reports-empty').classList.remove('hidden');
        };

        const formatReportPeriod = (periodType, periodStart) => {
            const start = new Date(periodStart);
            if (periodType === 'daily') {
                return start.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });
            } else if (periodType === 'weekly') {
                const end = new Date(start);
                end.setDate(end.getDate() + 6);
                return `${start.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - ${end.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}`;
            } else if (periodType === 'monthly') {
                return start.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            }
            return periodStart;
        };

        const getPeriodLabel = (periodType) => {
            if (periodType === 'daily') return 'Today';
            if (periodType === 'weekly') return 'This Week';
            if (periodType === 'monthly') return 'This Month';
            return periodType;
        };

        const regenerateReport = async (reportType) => {
            if (!state.currentOrg) return;

            const today = new Date();
            let periodStart;

            if (reportsPeriod === 'daily') {
                periodStart = new Date(today);
                periodStart.setDate(periodStart.getDate() - 1);
            } else if (reportsPeriod === 'weekly') {
                periodStart = new Date(today);
                periodStart.setDate(periodStart.getDate() - 7);
            } else if (reportsPeriod === 'monthly') {
                periodStart = new Date(today.getFullYear(), today.getMonth() - 1, 1);
            }

            try {
                await api.generateReport(state.currentOrg.id, {
                    report_type: reportType,
                    period_type: reportsPeriod,
                    period_start: periodStart.toISOString().split('T')[0]
                });

                // Show generating message
                document.getElementById('team-report-summary').textContent = 'Generating report... This may take a few seconds.';

                // Reload after delay
                setTimeout(() => loadReports(), 5000);
            } catch (error) {
                console.error('Failed to regenerate report:', error);
                tg.showAlert('Failed to regenerate report. Please try again.');
            }
        };

        const openAgentReport = async (reportId) => {
            // For now, just show an alert. Could open a modal with full report details.
            console.log('Opening agent report:', reportId);
            tg.showAlert('Full report view coming soon!');
        };

        const getBotIcon = (botId) => {
            const icons = {
                'lead-agent': 'ğŸ¯',
                'crm-assistant': 'ğŸ’¼',
                'calendar-sync': 'ğŸ“…',
                'task-manager': 'âœ…',
                'knowledge-base': 'ğŸ§ '
            };
            return icons[botId] || 'ğŸ¤–';
        };

        const getBotName = (botId) => {
            const names = {
                'lead-agent': 'B2B Lead Agent',
                'crm-assistant': 'CRM Assistant',
                'calendar-sync': 'Calendar Sync',
                'task-manager': 'Task Manager',
                'knowledge-base': 'Knowledge Base'
            };
            return names[botId] || botId;
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: BILLING
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const loadBillingOverview = async () => {
            if (!state.currentOrg) return;

            try {
                const billing = await api.getBillingOverview(state.currentOrg.id);
                state.billingOverview = billing;
                renderBillingOverview(billing);
            } catch (error) {
                console.error('Failed to load billing:', error);
            }
        };

        const renderBillingOverview = (billing) => {
            const { subscription, usage, invoices } = billing;

            // Plan info
            document.getElementById('billing-plan-name').textContent = subscription.plan.name;
            document.getElementById('billing-plan-description').textContent = subscription.plan.description || '';

            const periodEnd = new Date(subscription.current_period_end);
            const periodText = subscription.status === 'active'
                ? `Renews ${periodEnd.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}`
                : `Status: ${subscription.status}`;
            document.getElementById('billing-period-info').textContent = periodText;

            // Usage
            const membersLimit = usage.members_limit || 'Unlimited';
            const customersLimit = usage.customers_limit || 'Unlimited';

            document.getElementById('usage-members-text').textContent =
                `${usage.members_used} / ${membersLimit}`;
            document.getElementById('usage-customers-text').textContent =
                `${usage.customers_used} / ${customersLimit}`;

            // Calculate percentages
            if (usage.members_limit) {
                const percent = Math.min(100, (usage.members_used / usage.members_limit) * 100);
                const bar = document.getElementById('usage-members-bar');
                bar.style.width = `${percent}%`;
                bar.className = 'usage-fill' + (percent > 90 ? ' danger' : percent > 70 ? ' warning' : '');
            } else {
                document.getElementById('usage-members-bar').style.width = '30%';
            }

            if (usage.customers_limit) {
                const percent = Math.min(100, (usage.customers_used / usage.customers_limit) * 100);
                const bar = document.getElementById('usage-customers-bar');
                bar.style.width = `${percent}%`;
                bar.className = 'usage-fill' + (percent > 90 ? ' danger' : percent > 70 ? ' warning' : '');
            } else {
                document.getElementById('usage-customers-bar').style.width = '10%';
            }

            // Invoices
            const invoicesList = document.getElementById('invoices-list');
            const invoicesEmpty = document.getElementById('invoices-empty');

            if (invoices.length === 0) {
                invoicesList.innerHTML = '';
                invoicesEmpty.classList.remove('hidden');
            } else {
                invoicesEmpty.classList.add('hidden');
                invoicesList.innerHTML = invoices.map(inv => `
                    <div class="list-item">
                        <div class="list-item-content">
                            <div class="list-item-title">${inv.invoice_number}</div>
                            <div class="list-item-subtitle">${new Date(inv.issue_date).toLocaleDateString()} â€¢ ${formatCurrency(inv.total, inv.currency)}</div>
                        </div>
                        <span class="chip ${inv.status === 'paid' ? 'chip-success' : 'chip-warning'}">${inv.status}</span>
                    </div>
                `).join('');
            }
        };

        const formatCurrency = (cents, currency = 'USD') => {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: currency
            }).format(cents / 100);
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           ADMIN DASHBOARD: HELP
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        const openHelpLink = (type) => {
            const urls = {
                docs: 'https://docs.apexsolutions.io/workforce',
                tutorials: 'https://www.youtube.com/@apexsolutions',
                support: 'https://t.me/apex_support',
                faq: 'https://docs.apexsolutions.io/workforce/faq'
            };

            const url = urls[type];
            if (url) {
                tg.openLink(url);
            }
        };

        /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           START APP
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

        init();
    </script>
</body>
</html>
